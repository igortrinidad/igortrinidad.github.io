<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Adonis.js - reaproveitando messagens de validação - Igor Trindade Portfolio</title><meta name="gridsome:hash" content="5e4eb167fa28eb2d60cf8b99f01e097b1f021e6d"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.14"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="keywords" content="HTML,CSS,XML,JavaScript"><meta data-vue-tag="ssr" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta data-vue-tag="ssr" name="theme-color" content="#1A3742"><meta data-vue-tag="ssr" name="msapplication-navbutton-color" content="#1A3742"><meta data-vue-tag="ssr" name="apple-mobile-web-app-status-bar-style" content="#1A3742"><meta data-vue-tag="ssr" property="og:type" content="website"><meta data-vue-tag="ssr" name="description" content="Adonis.js - reaproveitando messagens de validação"><meta data-vue-tag="ssr" property="og:description" content="Adonis.js - reaproveitando messagens de validação"><meta data-vue-tag="ssr" property="og:title" content="Adonis.js - reaproveitando messagens de validação"><meta data-vue-tag="ssr" property="og:url" content="https://igortrindade.dev/story/aproveitando-codigo-adonis-validator"><meta data-vue-tag="ssr" property="og:image" content="https://images.pexels.com/photos/761297/pexels-photo-761297.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/icon.ce0531f.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/icon.ac8d93a.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/icon.b9532cc.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/icon.f22e9f3.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/icon.62d22cb.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/icon.1539b60.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/icon.dc0cdc5.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/icon.7b22250.e21375ab90149b28766151dfbf3fe7fb.png"><link data-vue-tag="ssr" rel="icon" type="image/png" href="/mkt/icon.png"><link rel="preload" href="/assets/css/0.styles.76eb29b5.css" as="style"><link rel="preload" href="/assets/js/app.02f9e9c3.js" as="script"><link rel="preload" href="/assets/js/page--src--layouts--templates--show-story-vue.363bc410.js" as="script"><link rel="prefetch" href="/assets/js/page--src--layouts--templates--show-project-vue.1858d6c8.js"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.1266fb22.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-me-vue.b98b494e.js"><link rel="prefetch" href="/assets/js/page--src--pages--contact--index-vue.1aa13e70.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.92990f08.js"><link rel="prefetch" href="/assets/js/page--src--pages--layouts--default-vue.9e9e0e12.js"><link rel="prefetch" href="/assets/js/page--src--pages--layouts--error-vue.07d1dec8.js"><link rel="prefetch" href="/assets/js/page--src--pages--layouts--terminal-menu-vue.3fc81d4d.js"><link rel="prefetch" href="/assets/js/page--src--pages--projects--index-vue.5210946e.js"><link rel="prefetch" href="/assets/js/page--src--pages--stories--index-vue.08f46df9.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--index-vue.237a7592.js"><link rel="stylesheet" href="/assets/css/0.styles.76eb29b5.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><div id="main-div" class="background antialiased"><div class="align-center"><span class="terminal-header-backdrop"></span><div id="terminal-window" class="terminal-window"><span class="terminal-header"><img src="/img/balls/ball_red_0.svg" class="ball-0 ml-3"><img src="/img/balls/ball_red_1.svg" class="ball-1 ml-3"><img src="/img/balls/ball_yellow_0.svg" class="ball-0 ml-2"><img src="/img/balls/ball_yellow_1.svg" class="ball-1 ml-2"><img src="/img/balls/ball_green_0.svg" class="ball-0 ml-2"><img src="/img/balls/ball_green_1.svg" class="ball-1 ml-2"></span><div class="terminal-content"><div class="terminal-body"><!----></div><span class="terminal-messages">Welcome to Igor Trindade's terminal! Click here to start!</span><span class="terminal-typed"><span class="terminal-user">igortrindade</span>$
        <span class="terminal-cursor"></span><input id="terminal-input" type="text" spellcheck="false" autocapitalize="none" value="" class="terminal-input"></span></div></div><audio id="typing-audio" src="/audio/typing.mp3" controls="controls" style="display: none;"></audio><audio id="typing-audio-short" src="/audio/typing_short.mp3" controls="controls" style="display: none;"></audio><audio id="typing-audio-enter" src="/audio/typing_enter.mp3" controls="controls" style="display: none;"></audio></div><div class="w-full flex justify-center p-4"><div class="container m-auto p-4"><section><!----></section></div></div></div></div>
    <script>window.__INITIAL_STATE__={"data":null,"context":{"story":{"slug":"aproveitando-codigo-adonis-validator","title":"Adonis.js - reaproveitando messagens de validação","description":"Adonis.js - reaproveitando messagens de validação","image":"https:\u002F\u002Fimages.pexels.com\u002Fphotos\u002F761297\u002Fpexels-photo-761297.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940","contents":[{"type":"code","language":"javascript","content":"const Story = {\n  \"title\" : \"Aprendendo Adonis.js - reaproveitando messagens de validação\"\n}"},{"type":"text","content":"\n        \u003Cp\u003EDurante a criação de validators as vezes podemos nos ver repetingo código e como programadores procuramos sempre uma maneira de simplificar e facilitar as coisas, ou seja, repetir menos código abstraindo parte da lógica de nossos componentes e classes.\u003C\u002Fp\u003E\n        \u003Cp\u003EOs validators do Adonis.js utilizam a library de validação Indicative e nós vamos utilizar um pouco da programação orientada a objetos para abstrair e reutilizar parte da lógica de validação dos nossos forms.\u003C\u002Fp\u003E\n        \u003Cp\u003EPara começar, vamos criar nosso validator através do comando: \u003Cb\u003E$ adonis make:validator RegisterUser\u003C\u002Fb\u003E e adicionar algumas regrinhas:\u003C\u002Fp\u003E\n\n      "},{"type":"code","language":"javascript","content":"'use strict'\n\nconst StandartMessages = require('.\u002FStandartMessages')\n\nclass RegisterUser {\n\n  get rules () {\n    return {\n      email: 'required|unique:users,email',\n      password: 'required|min:6|max:20'\n    }\n  }\n\n  get sanitizationRules () {\n    return {\n      email: 'normalize_email'\n    }\n  }\n\n  get messages() {\n    return {\n      \"email.required\" : \"Insira um email válido\",\n      \"password.required\" : \"Insira um password válido\",\n    }\n  }\n\n  async fails(errorMessages) {\n    return this.ctx.response.json({ errors: errorMessages.map((error) =\u003E error.message) })\n  }\n\n}\n\nmodule.exports = RegisterUser"},{"type":"text","content":"\n        \u003Cp\u003ENo nosso validator \u003Cb\u003ERegisterUser.js\u003C\u002Fb\u003E nós validamos os campos \u003Cb\u003Eemail\u003C\u002Fb\u003E e \u003Cb\u003Epassword\u003C\u002Fb\u003E.\u003C\u002Fp\u003E\n        \u003Cp\u003EO problema desse approach é que provavelmente vamos precisar reutilizar as mensagens de erro para nossas validações e com isso repetir código em todos os validators.\u003C\u002Fp\u003E\n        \u003Cp\u003EPara contornar esse problema podemos abstrair um pouco os métodos de messages e importamos apenas no módulos de validação que formos utilizar mensagens padrões do sistema, criando um módulo StandartMessges.js que vamos utiliza-lo como uma trait no javascript:\u003C\u002Fp\u003E\n\n      "},{"type":"code","language":"javascript","content":"\u002F\u002FStandartMessages.js\nmodule.exports = {\n\n  get validateAll () {\n    return true\n  },\n\n  get messages() {\n    return {\n      \"min\": \"{{ field }}: mínimo de {{ argument.0 }}\",\n      \"required\" : \"{{ field }}: campo obrigatório\"\n    }\n  },\n\n  async fails(errorMessages) {\n    return this.ctx.response.json({ errors: errorMessages.map((error) =\u003E error.message) })\n  }\n\n}"},{"type":"text","content":"\n        \u003Cp\u003EE agora para importamos os métodos que definimos na trait acima,  precisamos importar o módulo para a classe RegisterUser através do método \u003Cb\u003EObject.assign(RegisterUser.prototype, StandartMessages)\u003C\u002Fb\u003E\u003C\u002Fp\u003E\n\n      "},{"type":"code","language":"javascript","content":"\u002F\u002FRegisterUser.js\n'use strict'\n\nconst StandartMessages = require('.\u002FStandartMessages')\n\nclass RegisterUser {\n\n  get rules () {\n    return {\n      email: 'required|unique:users,email',\n      password: 'required|min:6|max:20'\n    }\n  }\n\n  get sanitizationRules () {\n    return {\n      email: 'normalize_email'\n    }\n  }\n\n}\n\nObject.assign(RegisterUser.prototype, StandartMessages)\n\nmodule.exports = RegisterUser"}]}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.02f9e9c3.js" defer></script><script src="/assets/js/page--src--layouts--templates--show-story-vue.363bc410.js" defer></script>
  </body>
</html>
